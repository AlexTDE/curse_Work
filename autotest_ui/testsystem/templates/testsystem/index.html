{% extends 'testsystem/base.html' %}

{% block title %}–î–∞—à–±–æ—Ä–¥ - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è UI{% endblock %}

{% block content %}
<div class="stats-grid">
    <div class="stat-card">
        <h3>{{ testcases_count }}</h3>
        <p>–¢–µ—Å—Ç-–∫–µ–π—Å–æ–≤</p>
    </div>
    <div class="stat-card">
        <h3>{{ runs_count }}</h3>
        <p>–ü—Ä–æ–≥–æ–Ω–æ–≤</p>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2>üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç–µ—Å—Ç-–∫–µ–π—Å—ã</h2>
    </div>
    {% if recent_testcases %}
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–≠–ª–µ–º–µ–Ω—Ç–æ–≤</th>
                <th>–°–æ–∑–¥–∞–Ω</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for tc in recent_testcases %}
            <tr>
                <td>{{ tc.id }}</td>
                <td><a href="{% url 'testcase_detail' tc.id %}">{{ tc.title }}</a></td>
                <td><span class="badge badge-{{ tc.status }}">{{ tc.get_status_display }}</span></td>
                <td>{{ tc.elements.count }}</td>
                <td>{{ tc.created_at|date:"d.m.Y H:i" }}</td>
                <td>
                    <a href="{% url 'testcase_detail' tc.id %}" class="btn btn-secondary btn-small">–ü—Ä–æ—Å–º–æ—Ç—Ä</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div style="margin-top: 15px;">
        <a href="{% url 'testcases_list' %}" class="btn">–í—Å–µ —Ç–µ—Å—Ç-–∫–µ–π—Å—ã ‚Üí</a>
    </div>
    {% else %}
    <p style="color: #666;">–ù–µ—Ç —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤. <a href="{% url 'testcases_list' %}">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π</a></p>
    {% endif %}
</div>

<div class="card">
    <div class="card-header">
        <h2>üöÄ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–æ–≥–æ–Ω—ã</h2>
    </div>
    {% if recent_runs %}
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>–¢–µ—Å—Ç-–∫–µ–π—Å</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–ü–æ–∫—Ä—ã—Ç–∏–µ</th>
                <th>–°–æ–∑–¥–∞–Ω</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for run in recent_runs %}
            <tr>
                <td>{{ run.id }}</td>
                <td><a href="{% url 'testcase_detail' run.testcase.id %}">{{ run.testcase.title }}</a></td>
                <td><span class="badge badge-{{ run.status }}">{{ run.get_status_display }}</span></td>
                <td>
                    {% if run.coverage is not None %}
                        {{ run.coverage|floatformat:1 }}%
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>{{ run.started_at|date:"d.m.Y H:i" }}</td>
                <td>
                    <a href="{% url 'run_detail' run.id %}" class="btn btn-secondary btn-small">–ü—Ä–æ—Å–º–æ—Ç—Ä</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div style="margin-top: 15px;">
        <a href="{% url 'runs_list' %}" class="btn">–í—Å–µ –ø—Ä–æ–≥–æ–Ω—ã ‚Üí</a>
    </div>
    {% else %}
    <p style="color: #666;">–ù–µ—Ç –ø—Ä–æ–≥–æ–Ω–æ–≤. <a href="{% url 'runs_list' %}">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π</a></p>
    {% endif %}
</div>
{% endblock %}
